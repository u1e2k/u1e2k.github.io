---
import type { CollectionEntry } from 'astro:content';
import Layout from './Layout.astro';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { Content } = await post.render();

// 前後の記事を取得する（簡略版）
// 実際のアプリケーションでは、全記事から前後を取得する処理が必要
---

<Layout title={post.data.title}>
  <div class="site-container">
    <header class="post-header">
      <div class="post-meta">
        <a href="/" class="back-link">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M12.7071 4.29289C13.0976 4.68342 13.0976 5.31658 12.7071 5.70711L8.41421 10L12.7071 14.2929C13.0976 14.6834 13.0976 15.3166 12.7071 15.7071C12.3166 16.0976 11.6834 16.0976 11.2929 15.7071L6.29289 10.7071C5.90237 10.3166 5.90237 9.68342 6.29289 9.29289L11.2929 4.29289C11.6834 3.90237 12.3166 3.90237 12.7071 4.29289Z"/>
          </svg>
          ホームに戻る
        </a>
        <time datetime={post.data.date.toISOString()}>
          {post.data.date.toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric' })}
        </time>
        {post.data.categories && (
          <div class="post-categories">
            {post.data.categories.map((category) => (
              <span class="category-tag">{category}</span>
            ))}
          </div>
        )}
      </div>
      <h1 class="post-title">{post.data.title}</h1>
    </header>

    <article class="post-content">
      <Content />
    </article>

    <footer class="post-footer">
      <div class="post-share">
        <span class="share-label">この記事をシェア:</span>
        <a href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(post.data.title)}&url=${encodeURIComponent(new URL(`blog/${post.slug}`, Astro.site).href)}`} target="_blank" rel="noopener" class="share-btn twitter">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
        </a>
        <a href={`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(new URL(`blog/${post.slug}`, Astro.site).href)}`} target="_blank" rel="noopener" class="share-btn facebook">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </a>
      </div>
    </footer>
  </div>
</Layout>
