---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

const posts = (await getCollection('posts')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
const recentPosts = posts.slice(0, 3);
---

<Layout title="u1e2k Portfolio">
  <div class="site-container">
    <section class="hero">
      <div class="hero-inner">
        <img class="avatar" src="/img/avatar.jpg" alt="avatar" />
        <div class="intro">
          <h1>はじめまして — I'm u1e2k</h1>
          <p class="tagline">Web 開発 / デザイン / 小さな実験を楽しむ人</p>
          <p>このサイトでは、私のプロジェクト・考え・制作物をまとめています。ポートフォリオやブログのエントリを順次追加しています。</p>
          <p>
            <a class="btn" href="https://github.com/u1e2k?tab=repositories">プロジェクトを見る</a>
            <a class="btn btn-outline" href="mailto:u1e2k@proton.me">連絡する</a>
          </p>
        </div>
      </div>
    </section>

    <section id="projects" class="projects">
      <h2>Selected Projects</h2>
      <div class="projects-grid">
        <article class="project-card">
          <h3>sir-time</h3>
          <p>集中力を維持し、効率的なタスク管理を支援するポモドーロタイマーアプリ。統計機能やカスタマイズオプション付き。</p>
          <a href="https://u1e2k.github.io/sir-time/" target="_blank" rel="noopener">デモを試す →</a>
          <a href="https://github.com/u1e2k/sir-time" target="_blank" rel="noopener">GitHub →</a>
        </article>

        <article class="project-card">
          <h3>plamo-mixer</h3>
          <p>プラモデル塗装用の塗料混合計算ツール。比率入力で必要量を自動計算し、レシピ保存も可能です。</p>
          <a href="https://plamo-mixer.streamlit.app/" target="_blank" rel="noopener">デモを試す →</a>
          <a href="https://github.com/u1e2k/plamo-mixer" target="_blank" rel="noopener">GitHub →</a>
        </article>


      </div>
    </section>

    {recentPosts.length > 0 && (
      <section class="recent-posts">
        <h2>Latest Posts</h2>
        <div class="projects-grid">
          {recentPosts.map((post) => (
            <article class="project-card post-card">
              <h3><a href={`/posts/${post.data.customSlug || post.slug}`}>{post.data.title}</a></h3>
              <time datetime={post.data.date.toISOString()}>
                {post.data.date.toLocaleDateString('ja-JP')}
              </time>
              <p>{post.body.slice(0, 140)}...</p>
            </article>
          ))}
        </div>
      </section>
    )}

    <section id="contact" class="contact">
      <h2>Contact</h2>
      <p>ご連絡はメールまたは GitHub の Issue/PR でお願いします。</p>
      <p class="contact-list">
        <strong>Email:</strong> <a href="mailto:u1e2k@proton.me">u1e2k@proton.me</a><br />
        <strong>GitHub:</strong> <a href="https://github.com/u1e2k">@u1e2k</a>
      </p>
    </section>

    <footer class="site-footer">
      <small>© u1e2k — Updated 2025-12-03</small>
    </footer>
  </div>
</Layout>
